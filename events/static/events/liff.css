/* =========================================
 * LIFF イベント管理 UI スタイル
 * ねらい: セクション順を統一し、最低限のコメントで保守しやすくする
 * 依存: liff.js が使用するクラス構成を変更しない（I/F互換）
 * ======================================= */


/* ========== 0) ベース / リセット ========== */
[hidden]{ display:none !important; } /* hidden属性は常に優先 */
html,body{ margin:0; padding:0; }
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans JP,sans-serif;
  margin:24px;
}
h1{ font-size:28px; margin:0 0 16px; }
.muted{ color:#888; font-size:13px; }


/* ========== 1) ボタン群（汎用） ========== */
button{ font:inherit; cursor:pointer; }

#btn-create{
  appearance:none; border:0; border-radius:9999px; padding:10px 16px;
  background:#06c755; color:#fff;
}

.btn-link{
  appearance:none; background:transparent; border:0; padding:0;
  font-size:13px; color:#06c755;
}
.btn-link.dangerous{ color:#d22; }

.btn-primary{
  background:#06c755; color:#fff; border:0; padding:8px 14px; border-radius:9999px; font-size:12px;
}
.btn-secondary{
  background:#f2f2f2; color:#333; border:0; padding:8px 14px; border-radius:9999px; font-size:12px;
}
.btn-outline{
  appearance:none; background:#fff; border:1px solid #06c755; color:#06c755;
  padding:6px 10px; border-radius:9999px; font-size:12px;
}
.btn-outline:hover{ background:#f6fff8; }
.btn-outline:focus-visible{ outline:3px solid rgba(6,199,85,.25); outline-offset:2px; }
.btn-outline.dangerous{ border-color:#d22; color:#d22; }
.btn-outline.dangerous:hover{ background:#fff6f6; }


/* ========== 2) イベント一覧カード（グリッド） ========== */
#event-list{
  margin-top:24px; display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); /* 1カードの最小幅: 200px */
  gap:12px;
}
.card{
  display:block;
  border:1px solid #eee; border-radius:12px;
  padding:12px; margin:8px 0;
  min-width:200px;            /* ← 最小幅のみを担保（列数はauto-fitに任せる） */
  max-width:100%;
}
.card h3{ margin:0 0 4px; font-size:16px; }
.card p{ margin:0; font-size:14px; color:#555; }
.card .actions{ margin-top:8px; display:flex; gap:10px; justify-content:flex-end; }


/* ========== 3) モーダル（作成/編集） ========== */
.backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(1px); z-index:999;
}
.dialog{ position:fixed; inset:0; display:grid; place-items:center; z-index:1000; }
.dialog[hidden], .backdrop[hidden]{ display:none; }

.dialog .dlg-panel{
  width:min(560px,92vw); background:#fff; border-radius:16px;
  box-shadow:0 6px 24px rgba(0,0,0,.12); overflow:hidden;
}
.dialog .dlg-header{ padding:14px 16px 6px; background:transparent; }
.dialog .dlg-header h2{ margin:0; }
.dialog .dlg-body{ padding:12px 16px; background:transparent; padding-top:6px; }
.dialog .dlg-footer{
  display:flex; gap:8px; justify-content:end; padding:10px 16px; background:transparent;
}


/* ========== 4) フォームレイアウト共通 ========== */
.row{ display:grid; gap:6px; margin:10px 0; } /* 1カラム行 */
.row2{
  display:grid; grid-template-columns:1fr 1fr;
  gap:10px; margin:6px 0 10px;                 /* 2カラム行（スマホでは縦積み） */
}
.row2.align-top{ align-items:start; }
.row4{
  display:grid; grid-template-columns:repeat(4,minmax(140px,1fr));
  gap:10px; margin:6px 0 10px;
}
.row span,
.row2 label>span,
.row4 label>span{ font-size:13px; color:#444; }

.subrow{ display:grid; gap:6px; }              /* ラベル→入力の縦積み */

.err{ color:#D22; font-size:12px; line-height:1.4; }
.row .err{ margin-top:-2px; }

/* 入力コアコンポーネント */
input[type="text"],
input[type="date"],
input[type="time"],
input[type="number"]{
  width:100%; box-sizing:border-box; padding:8px 10px;
  border:1px solid #ddd; border-radius:10px;
}


/* ========== 5) 終了入力 UI（:has() 切替） ========== */
/* 左=ラジオ群, 右=入力欄（選択中のみ表示） */
.endpicker{
  display:grid; grid-template-columns:auto 1fr;
  column-gap:10px; row-gap:6px; align-items:start;
  border:0; padding:0; margin:0;
}
.endmode-switch{
  display:flex; flex-direction:column; gap:6px; align-items:flex-start;
  padding-bottom:0; margin-right:20px;
}
.radio-pill{ display:inline-flex; align-items:center; gap:6px; font-size:13px; color:#444; }
.endmode-switch input[type="radio"]{ transform:translateY(0.5px); }

.endpicker .end-input{ display:grid; }
.endpicker .when-time{ display:grid; }
.endpicker .when-duration{ display:none; }

/* duration選択時に切替 */
.endpicker:has(input[name="endmode"][value="duration"]:checked) .when-time{ display:none; }
.endpicker:has(input[name="endmode"][value="duration"]:checked) .when-duration{ display:grid; }


/* ========== 6) 共有グループ（プレビュー/サジェスト） ========== */
#row-group-to-share{ justify-items:start; }             /* 行全体を左寄せ */
.sg-preview{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border:1px solid #ddd; border-radius:9999px; background:#fff;
  width:max-content; max-width:100%; justify-self:start;
}
.sg-preview img{ width:24px; height:24px; border-radius:50%; }
.truncate{ display:inline-block; max-width:26ch; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

.sg-pill img{ width:24px; height:24px; border-radius:50%; }
.sg-pill .name{ font-size:14px; }
.sg-pill .clear{ margin-left:8px; font-size:12px; color:#888; cursor:pointer; }

#group-suggest{ display:flex; flex-direction:column; gap:8px; align-items:flex-start; }
#group-suggest .card{ display:inline-flex; padding:6px 10px; border-radius:10px; }

/* ========== 7) 参加者リスト ========== */
.att-box{
  margin-top:8px; padding:10px 12px; background:#fafafa;
  border:1px solid #eee; border-radius:10px;
}
.att-box h4{ font-size:13px; margin:0 0 6px; color:#444; }
.att-box ul{ margin:0; padding-left:18px; }
.att-box ul.att-grid{ padding-left:0; }
.att-box li{ font-size:13px; color:#555; line-height:1.6; }
.att-box .muted{ color:#777; }
.att-box .error{ color:#c03; }

/* 参加者グリッド：固定幅カラムを左に詰める */
.att-grid{
  list-style:none; margin:0; padding:0;
  display:grid;
  grid-template-columns: repeat(auto-fill, 72px);
  justify-content: start;
  gap:10px;
}

/* セル内は縦積み・中身は中央（セル自体の幅は固定72px） */
.att-cell{
  inline-size:72px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:6px;
}

.att-avatar{
  width:48px; height:48px; border-radius:50%; object-fit:cover;
  background:#e9e9e9; display:inline-block;
}
.att-avatar.placeholder{ background:#e9e9e9; }

.att-name{
  width:100%;
  text-align:center;
  font-size:12px;
  color:#333;
  line-height:1.2;
  word-break:break-all;           /* 長い名前の折返し */
}

/* リスト型（未使用時は保持のみ） */
.att-list{ list-style:none; margin:0; padding:0; display:grid; gap:8px; }
.att-item{ display:grid; grid-template-columns:28px 1fr; column-gap:8px; align-items:center; }
.att-meta{ display:grid; }


/* ========== 8) レスポンシブ ========== */
@media (max-width:480px){
  .row2{ grid-template-columns:1fr; }     /* 日付+開始時刻 → 縦積み */
  .endpicker{ grid-template-columns:1fr; } /* 終了ラジオの下に入力欄を縦積み */
}
