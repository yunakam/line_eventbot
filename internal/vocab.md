# 用語集

* **scope（スコープ）**

  このプロジェクトにおける「scope」は**会話の単位を識別するID**の総称。

  具体的には:

  * グループ: `groupId`（先頭が `C`のID）
  * ルーム: `roomId`（先頭が `R`のID）
  * 1:1ユーザー: `userId`（先頭が `U`のID）

    本アプリでは、URLクエリ（`?groupId=...` または `?userId=...`）や内部状態で、この「scopeId」を保持・復元して、**どの会話に紐づくイベント一覧を見せるか／作成後の通知をどこに出すか**を決めている。
* **token（トークン）**

  ここで扱う主役は  **LIFFのIDトークン** （OpenID ConnectのJWT）である。`liff.getIDToken()`で取得でき、`sub`（ユーザーID）・`exp`（有効期限）などのクレーム（属性）が入っている。

  クライアント（フロントエンド）ではこのIDトークンを**毎回APIに同送**し、サーバ側で正当性検証（`/oauth2/v2.1/verify`）→ユーザー判定を行う。これにより、

  * 「自分が作成したイベント一覧」を出す
  * 参加／キャンセルなど**ユーザーを特定する必要のある操作**を許可する

    といったセキュアな処理が可能になる。

    ※アクセストークンとは役割が異なる。ここでは**本人確認（Who are you?）**のためにIDトークンを使っている。
*
